{%  load static %}
{% load humanize %}

<!doctype html>

<html
  lang="en"
  class="layout-navbar-fixed layout-menu-fixed layout-compact"
  dir="ltr"
  data-skin="default"
  data-bs-theme="light"
  data-assets-path="{% static 'assets' %}">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <meta name="robots" content="noindex, nofollow" />
     <title>Growfox - Marketing Data Center</title>

    <meta name="description" content="" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{% static 'assets/img/favicon/gavicon.jpg' %}?v=3" />


    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&ampdisplay=swap"
      rel="stylesheet" />

    <link rel="stylesheet" href="{% static 'assets/vendor/fonts/iconify-icons.css' %}" />

    <!-- Core CSS -->
    <!-- build:css assets/vendor/css/theme.css -->

    <link rel="stylesheet" href="{% static 'assets/vendor/libs/node-waves/node-waves.css' %}" />

    <link rel="stylesheet" href="{% static 'assets/vendor/libs/pickr/pickr-themes.css' %}" />

    <link rel="stylesheet" href="{% static 'assets/vendor/css/core.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/demo.css' %}" />

    <!-- Vendors CSS -->

    <link rel="stylesheet" href="{% static 'assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css' %}" />

    <!-- endbuild -->

    <link rel="stylesheet" href="{% static 'assets/vendor/libs/datatables-bs5/datatables.bootstrap5.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/vendor/libs/datatables-buttons-bs5/buttons.bootstrap5.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/vendor/libs/apex-charts/apex-charts.css' %}" />

    <!-- Page CSS -->

    <!-- Helpers -->
    <script src="{% static 'assets/vendor/js/helpers.js' %}"></script>
    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->

    <!--? Template customizer: To hide customizer set displayCustomizer value false in config.js. -->
    <script src="{% static 'assets/vendor/js/template-customizer.js' %}"></script>

    <!--? Config: Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file. -->

    <script src="{% static 'assets/js/config.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.0/build/global/luxon.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.0/dist/chartjs-adapter-luxon.min.js"></script>
  </head>

  <body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
      <div class="layout-container">
        <!-- Menu -->
<aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
  <div class="app-brand demo logo-wrapper">
    <!-- ✅ แก้ href จาก index.html เป็น {% url 'index' %} -->
    <a href="{% url 'index' %}" class="app-brand-link">
      <img src="{% static 'assets/img/branding/growfox.webp' %}" alt="Growfox Logo" class="logo-full" />
    </a>

    <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-white text-large ms-auto">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M8.47365 11.7183C8.11707 12.0749 8.11707 12.6531 8.47365 13.0097L12.071 16.607C12.4615 16.9975 12.4615 17.6305 12.071 18.021C11.6805 18.4115 11.0475 18.4115 10.657 18.021L5.83009 13.1941C5.37164 12.7356 5.37164 11.9924 5.83009 11.5339L10.657 6.707C11.0475 6.31653 11.6805 6.31653 12.071 6.707C12.4615 7.09747 12.4615 7.73053 12.071 8.121L8.47365 11.7183Z"
          fill-opacity="0.9" />
        <path
          d="M14.3584 11.8336C14.0654 12.1266 14.0654 12.6014 14.3584 12.8944L18.071 16.607C18.4615 16.9975 18.4615 17.6305 18.071 18.021C17.6805 18.4115 17.0475 18.4115 16.657 18.021L11.6819 13.0459C11.3053 12.6693 11.3053 12.0587 11.6819 11.6821L16.657 6.707C17.0475 6.31653 17.6805 6.31653 18.071 6.707C18.4615 7.09747 18.4615 7.73053 18.071 8.121L14.3584 11.8336Z"
          fill-opacity="0.4" />
      </svg>
    </a>
  </div>

<div class="menu-inner-shadow"></div>

<ul class="menu-inner py-1">

  <!-- Add Group Menu Bar -->
  <li class="menu-header small mt-5">
    <span class="menu-header-text" data-i18n="Apps & Pages">Pages &amp; Posts</span>
  </li>

  <li class="menu-item">
    <a href="javascript:void(0);" class="menu-link menu-toggle">
      <i class="menu-icon icon-base ri ri-numbers-line"></i>
      <div data-i18n="Page Campaigns">Page Campaigns</div>
      <div class="badge badge-center text-bg-danger rounded-pill ms-auto">{{ page_groups_count }}</div>
    </a>
    <ul class="menu-sub">
      {% for group in page_groups_sidebar %}
        <li class="menu-item">
          <a href="{% url 'group_detail' group.id %}" class="menu-link">
            <div data-i18n="{{ group.group_name }}">{{ group.group_name }}</div>
          </a>
        </li>
      {% endfor %}
    </ul>
  </li>

  <!-- 🔶 Post Campaign Menu -->
  <li class="menu-item">
    <a href="javascript:void(0);" class="menu-link menu-toggle">
      <i class="menu-icon icon-base ri ri-article-line"></i>
      <div data-i18n="Post Campaigns">Post Campaigns</div>
      <div class="badge badge-center text-bg-danger rounded-pill ms-auto">{{ comment_campaign_groups|length }}</div>
    </a>
    <ul class="menu-sub">
      {% for group in comment_campaign_groups %}
        <li class="menu-item">
          <a href="{% url 'posts_campaign' group_name=group.group_name %}" class="menu-link">
            <div>{{ group.group_name }}</div>
          </a>
        </li>
      {% endfor %}
    </ul>
  </li>


  <!-- ⚙️ Setting & User moved to bottom -->
  <div class="mt-auto">
    <ul class="menu-inner py-1">
      <li class="menu-header small mt-5">
        <span class="menu-header-text">Setting</span>
      </li>
      <li class="menu-item">
        <a href="javascript:void(0);" class="menu-link menu-toggle">
          <i class="menu-icon ri ri-user-line"></i>
          <div data-i18n="Users">Users</div>
        </a>
        <ul class="menu-sub">
          <li class="menu-item">
            <a href="app-ecommerce-dashboard.html" class="menu-link">
              <div data-i18n="hello@growfox.co">hello@growfox.co</div>
            </a>
          </li>
        </ul>
      </li>
      <li class="menu-item">
        <a href="javascript:void(0);" class="menu-link menu-toggle">
          <i class="menu-icon ri ri-settings-3-line"></i>
          <div data-i18n="Setting">Setting</div>
        </a>
      </li>
    </ul>
  </div>
</aside>

        <div class="menu-mobile-toggler d-xl-none rounded-1">
          <a href="javascript:void(0);" class="text-large text-bg-secondary p-2 rounded-1">
            <i class="ri ri-menu-line icon-base"></i>
            <i class="ri ri-arrow-right-s-line icon-base"></i>
          </a>
        </div>
          <!-- / Menu -->


          <!-- / Navbar -->
<div class="layout-page">
            <!-- Content -->
<!-- Content wrapper -->
<div class="content-wrapper">
  <div class="container-xxl flex-grow-1 container-p-y">
<!-- Content wrapper -->
<div class="container-xxl flex-grow-1 container-p-y">
  <div class="card p-4 mt-4">
    <!-- หัวข้อและปุ่ม -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <div>
        <h5 style="font-weight: 500; font-size: 20px;">Page Campaign Dashboard</h5>
      </div>
      <button type="button" class="btn btn-warning btn-sm" style="background-color: #FF6801; color: white; border-radius: 8px; padding: 8px 16px;" data-bs-toggle="modal" data-bs-target="#addPageGroupModal">
        + Create Campaign
      </button>
    </div>

    <!-- Modal Add Group สำหรับ Page Campaigns -->
    <div class="modal fade" id="addPageGroupModal" tabindex="-1" aria-labelledby="addPageGroupModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <form method="POST" action="{% url 'index' %}">
            {% csrf_token %}
            <div class="modal-header">
              <h5 class="modal-title" id="addPageGroupModalLabel">Create New Page Group</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="mb-3">
                <label for="id_group_name" class="form-label">Campaign Name</label>
                <input type="text" name="group_name" class="form-control" placeholder="Baking club 2025" required>
              </div>
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn" style="background-color: #FF6F00; color: white; width: 100%; padding: 12px 16px; border-radius: 8px;">Create</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- ตารางแสดงข้อมูลกลุ่ม -->
    <div class="table-responsive">
      <table class="table table-hover" style="border: 1px solid #E0E0E0; border-radius: 8px; overflow: hidden;">
        <thead style="background-color: #F5F5F5; color: #424242; font-weight: 500; font-size: 15px;">
          <tr>
            <th style="padding: 16px;">Campaign Name</th>
            <th style="padding: 16px;">Pages</th>
          </tr>
        </thead>
        <tbody>
          {% for group in page_groups %}
            <tr style="border-bottom: 1px solid #E0E0E0;">
              <td style="padding: 16px; font-size: 15px;">
                <a href="{% url 'group_detail' group.pk %}" style="text-decoration: none; color: inherit;">
                  {{ group.group_name }}
                </a>
              </td>
              <td style="padding: 16px; font-size: 15px;">{{ group.pages.count }} Pages in this Group</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

<!-- เพิ่ม Bootstrap CSS -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/5.1.0/css/bootstrap.min.css" rel="stylesheet">

<!-- เพิ่ม Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>


    <!-- การ์ด Welcome -->
    <div class="card p-4" style="margin-top: 10px;"> <!-- ปรับ margin-top เป็น 10px -->
      <h5 class="mb-2">Welcome to Growfox Marketing Data Center</h5>
      <p class="text-muted mb-4">This application is intended for internal use only. Unauthorized access is strictly prohibited.</p>
      <div class="row">
        <div class="col-md-4">
          <div style="background-color: #f5f5f5; border-radius: 8px; padding: 1rem; display: flex; align-items: center; gap: 1rem;">
      <div style="width: 50px; height: 50px; background: white; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
  <img src="{% static 'assets/img/icons/pagecampaign.png' %}" alt="Facebook Icon" style="width: 40px; height: 40px; object-fit: contain;" />
</div>
            <div>
              <div class="text-muted small">Insights Overview</div>
              <div class="fw-semibold" style="color: #FF6801;;">Page Campaign</div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div style="background-color: #f5f5f5; border-radius: 8px; padding: 1rem; display: flex; align-items: center; gap: 1rem;">
            <div style="width: 50px; height: 50px; background: white; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
              <img src="{% static 'assets/img/icons/seeding.webp' %}" alt="Tiktok Icon" style="width: 50px; height: 50px; object-fit: contain;" />
            </div>
            <div>
              <div class="text-muted small">Post Overview</div>
              <div class="fw-semibold" style="color: #FF6801;">Seeding Campaign</div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div style="background-color: #f5f5f5; border-radius: 8px; padding: 1rem; display: flex; align-items: center; gap: 1rem;">
            <div style="width: 50px; height: 50px; background: #e4e7f2; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
              <img src="{% static 'assets/img/icons/activity.png' %}" alt="OpenAI Icon" style="width: 50px; height: 50px; object-fit: contain;" />
            </div>
            <div>
              <div class="text-muted small">Post Overview</div>
              <div class="fw-semibold" style="color: #FF6801;">Activity Campaign</div>
            </div>
          </div>
        </div>
      </div>
    </div>
<!-- 🟣 Post Campaign Dashboard -->
<div class="card p-4 mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h5 style="font-weight: 500; font-size: 20px;">Post Campaign Dashboard</h5>
    <button type="button" class="btn btn-warning btn-sm" style="background-color: #FF6801; color: white; border-radius: 8px; padding: 8px 16px;" data-bs-toggle="modal" data-bs-target="#createCampaignModal">
      + Create Campaign
    </button>
  </div>

  <!-- ตารางแสดงแคมเปญโพสต์ -->
  <div class="table-responsive">
    <table class="table table-hover" style="border: 1px solid #E0E0E0; border-radius: 8px; overflow: hidden;">
      <thead style="background-color: #F5F5F5; color: #424242; font-weight: 500; font-size: 15px;">
        <tr>
          <th style="padding: 16px;">Campaign Name</th>
          <th style="padding: 16px;">Created At</th>
        </tr>
      </thead>
      <tbody>
        {% for campaign in comment_campaign_groups %}
        <tr style="border-bottom: 1px solid #E0E0E0;">
          <td style="padding: 16px; font-size: 15px;">
            <!-- ลิงก์ไปยังหน้า posts_campaign โดยใช้ pk ของ CommentCampaignGroup -->
            <a href="{% url 'posts_campaign' group_name=campaign.group_name %}" style="text-decoration: none; color: inherit;">
              {{ campaign.group_name }}
            </a>
          </td>
          <td style="padding: 16px; font-size: 15px;">{{ campaign.created_at|date:"d M Y H:i" }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="2" class="text-center">No campaigns found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

      <!-- เพิ่ม Bootstrap CSS -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.1.0/css/bootstrap.min.css" rel="stylesheet">

    <!-- เพิ่ม Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Modal for Create Campaign -->
<div class="modal fade" id="createCampaignModal" tabindex="-1" aria-labelledby="createCampaignModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="createCampaignModalLabel">Create Campaign </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form method="POST" action="{% url 'create_comment_campaign' %}">
          {% csrf_token %}
          <div class="mb-3">
            <label for="group_name" class="form-label">Campaign Name</label>
            <input type="text" name="group_name" class="form-control" placeholder="Ex. Hygiene" required>
          </div>
          <button type="submit" class="btn btn-warning w-100" style="background-color: #FF6801; color: white; border-radius: 8px; padding: 8px 16px;">Create</button>
        </form>
      </div>
    </div>
  </div>
</div>
</div>
            <!-- / Content -->

          <br>

            <!-- Footer -->
<footer class="content-footer footer bg-footer-theme mt-auto py-4 border-top">
  <div class="container-xxl d-flex flex-column flex-md-row align-items-center justify-content-between">
    <div class="text-muted mb-2 mb-md-0" style="color: #FF6801;">
      © <script>document.write(new Date().getFullYear());</script> Growfox Marketing Data Center. All rights reserved.
    </div>
    <div class="footer-links d-flex flex-wrap gap-3">
      <a href="/terms" class="footer-link" style="color: #FF6801 !important;">Terms</a>
      <a href="/privacy" class="footer-link" style="color: #FF6801 !important;">Privacy</a>
      <a href="/support" class="footer-link" style="color: #FF6801 !important;">F.A.Q.</a>
    </div>
  </div>
</footer>
            <!-- / Footer -->

            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>

      <!-- Drag Target Area To SlideIn Menu On Small Screens -->
      <div class="drag-target"></div>
    </div>
    <!-- / Layout wrapper -->

    <!-- Core JS -->

    <!-- build:js assets/vendor/js/theme.js  -->

    <script src="{% static 'assets/vendor/libs/jquery/jquery.js' %}"></script>

    <script src="{% static 'assets/vendor/libs/popper/popper.js' %}"></script>
    <script src="{% static 'assets/vendor/js/bootstrap.js' %}"></script>
    <script src="{% static 'assets/vendor/libs/node-waves/node-waves.js' %}"></script>

    <script src="{% static 'assets/vendor/libs/@algolia/autocomplete-js.js' %}"></script>

    <script src="{% static 'assets/vendor/libs/pickr/pickr.js' %}"></script>

    <script src="{% static 'assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js' %}"></script>

    <script src="{% static 'assets/vendor/libs/hammer/hammer.js' %}"></script>

    <script src="{% static 'assets/vendor/libs/i18n/i18n.js' %}"></script>

    <script src="{% static 'assets/vendor/js/menu.js' %}"></script>

    <!-- endbuild -->

    <!-- Vendors JS -->
    <script src="{% static 'assets/vendor/libs/moment/moment.js' %}"></script>
    <script src="{% static 'assets/vendor/libs/datatables-bs5/datatables-bootstrap5.js' %}"></script>
    <script src="{% static 'assets/vendor/libs/apex-charts/apexcharts.js' %}"></script>

    <!-- Main JS -->

    <script src="{% static 'assets/js/main.js' %}"></script>

    <!-- Page JS -->
    <script src="{% static 'assets/js/app-academy-dashboard.js' %}"></script>
  </body>
</html>
